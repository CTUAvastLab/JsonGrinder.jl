<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Extraction · JsonGrinder.jl</title><meta name="title" content="Extraction · JsonGrinder.jl"/><meta property="og:title" content="Extraction · JsonGrinder.jl"/><meta property="twitter:title" content="Extraction · JsonGrinder.jl"/><meta name="description" content="Documentation for JsonGrinder.jl."/><meta property="og:description" content="Documentation for JsonGrinder.jl."/><meta property="twitter:description" content="Documentation for JsonGrinder.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="JsonGrinder.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="JsonGrinder.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../motivation/">Motivation</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../schema_inference/">Schema inference</a></li><li class="is-active"><a class="tocitem" href>Extraction</a><ul class="internal"><li><a class="tocitem" href="#Manual-creation-of-[Extractor](@ref)s"><span>Manual creation of <code>Extractor</code>s</span></a></li><li><a class="tocitem" href="#Semi-automatic-[Extractor](@ref)-creation"><span>Semi-automatic <code>Extractor</code> creation</span></a></li><li><a class="tocitem" href="#Stable-[Extractor](@ref)s"><span>Stable <code>Extractor</code>s</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/mutagenesis/mutagenesis/">Mutagenesis</a></li><li><a class="tocitem" href="../../examples/recipes/recipes/">Recipes</a></li></ul></li><li><span class="tocitem">External tools</span><ul><li><a class="tocitem" href="../../tools/hierarchical/">HierarchicalUtils.jl</a></li><li><a class="tocitem" href="../../tools/hyperopt/">Hyperopt.jl</a></li></ul></li><li><span class="tocitem">Public API</span><ul><li><a class="tocitem" href="../../api/schema/">Schema</a></li><li><a class="tocitem" href="../../api/extractor/">Extractors</a></li></ul></li><li><a class="tocitem" href="../../citation/">Citation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Extraction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Extraction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CTUAvastLab/JsonGrinder.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CTUAvastLab/JsonGrinder.jl/blob/master/docs/src/manual/extraction.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Extraction"><a class="docs-heading-anchor" href="#Extraction">Extraction</a><a id="Extraction-1"></a><a class="docs-heading-anchor-permalink" href="#Extraction" title="Permalink"></a></h1><p><a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a> is responsible for converting JSON documents into <a href="https://github.com/CTUAvastLab/Mill.jl"><code>Mill.jl</code></a> structures. The main idea is that the extractor follows the same hierarchical structure as previously inferred <a href="../../api/schema/#JsonGrinder.Schema"><code>Schema</code></a>. Extractor for a whole JSON is created by composing (sub-)extractors while reflecting the JSON structure.</p><p>Assume the following dataset of two JSON documents for which we infer a <a href="../../api/schema/#JsonGrinder.Schema"><code>Schema</code></a>:</p><pre><code class="language-julia hljs">using JSON</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; jss = JSON.parse(&quot;&quot;&quot;[
           {
               &quot;name&quot;: &quot;Karl&quot;,
               &quot;siblings&quot;: [&quot;Gertruda&quot;, &quot;Heike&quot;, &quot;Fritz&quot;],
               &quot;hobby&quot;: [&quot;running&quot;, &quot;pingpong&quot;],
               &quot;age&quot;: 21
           },
           {
               &quot;name&quot;: &quot;Heike&quot;,
               &quot;siblings&quot;: [&quot;Gertruda&quot;, &quot;Heike&quot;, &quot;Fritz&quot;],
               &quot;hobby&quot;: [&quot;yoga&quot;],
               &quot;age&quot;: 24
           }
       ]&quot;&quot;&quot;);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sch = schema(jss)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictEntry</span><span class="sgr90"><span class="sgr3"> 2x updated</span></span>
<span class="sgr34">  ├─────── age: </span>LeafEntry (2 unique `Real` values)<span class="sgr90"><span class="sgr3"> 2x updated</span></span>
<span class="sgr34">  ├───── hobby: </span><span class="sgr31">ArrayEntry</span><span class="sgr90"><span class="sgr3"> 2x updated</span></span>
<span class="sgr34">  │             </span><span class="sgr31">  ╰── </span>LeafEntry (3 unique `String` values)<span class="sgr90"><span class="sgr3"> 3x updated</span></span>
<span class="sgr34">  ├────── name: </span>LeafEntry (2 unique `String` values)<span class="sgr90"><span class="sgr3"> 2x updated</span></span>
<span class="sgr34">  ╰── siblings: </span><span class="sgr31">ArrayEntry</span><span class="sgr90"><span class="sgr3"> 2x updated</span></span>
<span class="sgr34">                </span><span class="sgr31">  ╰── </span>LeafEntry (3 unique `String` values)<span class="sgr90"><span class="sgr3"> 6x updated</span></span></code></pre><h2 id="Manual-creation-of-[Extractor](@ref)s"><a class="docs-heading-anchor" href="#Manual-creation-of-[Extractor](@ref)s">Manual creation of <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a>s</a><a id="Manual-creation-of-[Extractor](@ref)s-1"></a><a class="docs-heading-anchor-permalink" href="#Manual-creation-of-[Extractor](@ref)s" title="Permalink"></a></h2><p>One possible way to create an <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a> is to manually define it from all the required pieces. One extractor corresponding to <code>sch</code> might look like this:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e = DictExtractor((
           name = NGramExtractor(),
           age = ScalarExtractor(),
           hobby = ArrayExtractor(CategoricalExtractor([&quot;running&quot;, &quot;swimming&quot;,&quot;yoga&quot;]))
       ))</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictExtractor</span>
<span class="sgr34">  ├─── name: </span>NGramExtractor(n=3, b=256, m=2053)
<span class="sgr34">  ├──── age: </span>ScalarExtractor(c=0.0, s=1.0)
<span class="sgr34">  ╰── hobby: </span><span class="sgr31">ArrayExtractor</span>
<span class="sgr34">             </span><span class="sgr31">  ╰── </span>CategoricalExtractor(n=4)</code></pre><p>We have just created a <a href="../../api/extractor/#JsonGrinder.DictExtractor"><code>DictExtractor</code></a> with</p><ul><li><a href="../../api/extractor/#JsonGrinder.NGramExtractor"><code>NGramExtractor</code></a> to extract <code>String</code>s under the <code>&quot;name&quot;</code> key,</li><li><a href="../../api/extractor/#JsonGrinder.ScalarExtractor"><code>ScalarExtractor</code></a> to extract age under the <code>&quot;age&quot;</code> key, and finally</li><li><a href="../../api/extractor/#JsonGrinder.ArrayExtractor"><code>ArrayExtractor</code></a> for extracting arrays under the <code>&quot;hobby&quot;</code> key. This extractor has one child, a <a href="../../api/extractor/#JsonGrinder.CategoricalExtractor"><code>CategoricalExtractor</code></a>, which operates on three hobby categories.</li></ul><p>Applying <code>e</code> on the first JSON document yields the following hierarchy of <a href="https://github.com/CTUAvastLab/Mill.jl"><code>Mill.jl</code></a> structures:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = e(jss[1])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">ProductNode</span><span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">  ├─── name: </span>ArrayNode(2053×1 NGramMatrix with Int64 elements)<span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">  ├──── age: </span>ArrayNode(1×1 Array with Float32 elements)<span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">  ╰── hobby: </span><span class="sgr31">BagNode</span><span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">             </span><span class="sgr31">  ╰── </span>ArrayNode(4×2 OneHotArray with Bool elements)<span class="sgr90"><span class="sgr3">  2 obs</span></span></code></pre><div class="admonition is-category-ukn"><header class="admonition-header">Consistent preprocessing</header><div class="admonition-body"><p>If any preprocessing was performed for input documents as for example discussed in <a href="../schema_inference/#Preprocessing">Preprocessing</a> make sure to apply the same preprocessing before passing documents to any <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a> as well!</p></div></div><div class="admonition is-category-ukn"><header class="admonition-header">Missing key</header><div class="admonition-body"><p>Note that we didn&#39;t include any extractor for the <code>&quot;siblings&quot;</code> key. In such case, the key in the JSON document is simply ignored and never extracted.</p></div></div><p>Every (sub)extractor, a node in the extractor &quot;tree&quot; is also callable, for example:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e[:hobby](jss[1][&quot;hobby&quot;])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">BagNode</span><span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">  ╰── </span>ArrayNode(4×2 OneHotArray with Bool elements)<span class="sgr90"><span class="sgr3">  2 obs</span></span></code></pre><p>Let&#39;s inspect how the subtree under the <code>&quot;hobby&quot;</code> key in the JSON was extracted:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; printtree(x; trav=true)</code><code class="nohighlight hljs ansi" style="display:block;">ProductNode [&quot;&quot;]  1 obs
  ├─── name: ArrayNode(2053×1 NGramMatrix with Int64 elements) [&quot;E&quot;]  1 obs
  ├──── age: ArrayNode(1×1 Array with Float32 elements) [&quot;U&quot;]  1 obs
  ╰── hobby: BagNode [&quot;k&quot;]  1 obs
               ╰── ArrayNode(4×2 OneHotArray with Bool elements) [&quot;s&quot;]  2 obs</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x[&quot;s&quot;]</code><code class="nohighlight hljs ansi" style="display:block;">4×2 ArrayNode{OneHotArrays.OneHotMatrix{UInt32, Vector{UInt32}}, Nothing}:
 1  ⋅
 ⋅  ⋅
 ⋅  ⋅
 ⋅  1</code></pre><p>The first column in the <code>OneHotMatrix</code> corresponds to <code>&quot;running&quot;</code>, which is the first category in the corresponding <a href="../../api/extractor/#JsonGrinder.CategoricalExtractor"><code>CategoricalExtractor</code></a>. The second column corresponds to <code>&quot;pingpong&quot;</code>, which is an <em>unknown</em> category in the extractor. Any other unknown <code>String</code> would be extracted in the same way:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e[&quot;s&quot;](&quot;unknown&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">4×1 ArrayNode{OneHotArrays.OneHotMatrix{UInt32, Vector{UInt32}}, Nothing}:
 ⋅
 ⋅
 ⋅
 1</code></pre><div class="admonition is-category-ukn"><header class="admonition-header">Further reading</header><div class="admonition-body"><p>For more information about individual subtypes of <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a>, see their docs, or <a href="../../api/extractor/#extractor_api">Extractor API</a>.</p></div></div><h2 id="Semi-automatic-[Extractor](@ref)-creation"><a class="docs-heading-anchor" href="#Semi-automatic-[Extractor](@ref)-creation">Semi-automatic <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a> creation</a><a id="Semi-automatic-[Extractor](@ref)-creation-1"></a><a class="docs-heading-anchor-permalink" href="#Semi-automatic-[Extractor](@ref)-creation" title="Permalink"></a></h2><p>Manually creating <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a>s is a laborous and error-prone process once the hierarchical structure of input JSON documents gets large. For this reason, <a href="https://github.com/CTUAvastLab/JsonGrinder.jl"><code>JsonGrinder.jl</code></a> provides the <a href="../../api/extractor/#JsonGrinder.suggestextractor"><code>suggestextractor</code></a> function greatly simplifying this process:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e = suggestextractor(sch)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictExtractor</span>
<span class="sgr34">  ├─────── age: </span>CategoricalExtractor(n=3)
<span class="sgr34">  ├────── name: </span>CategoricalExtractor(n=3)
<span class="sgr34">  ├── siblings: </span><span class="sgr31">ArrayExtractor</span>
<span class="sgr34">  │             </span><span class="sgr31">  ╰── </span>CategoricalExtractor(n=4)
<span class="sgr34">  ╰───── hobby: </span><span class="sgr31">ArrayExtractor</span>
<span class="sgr34">                </span><span class="sgr31">  ╰── </span>CategoricalExtractor(n=4)</code></pre><p>The function uses a simple heuristic for choosing reasonable extractors for values in leaves: if there are not many unique values (less than the <code>categorical_limit</code> keyword argument), use <a href="../../api/extractor/#JsonGrinder.CategoricalExtractor"><code>CategoricalExtractor</code></a>, else use either <a href="../../api/extractor/#JsonGrinder.NGramExtractor"><code>NGramExtractor</code></a> or <a href="../../api/extractor/#JsonGrinder.ScalarExtractor"><code>ScalarExtractor</code></a> depending on the type.</p><div class="admonition is-category-ukn"><header class="admonition-header">Hooking into the behavior</header><div class="admonition-body"><p>It is possible to hook into the internals of how <a href="../../api/extractor/#JsonGrinder.suggestextractor"><code>suggestextractor</code></a> treats values in leaves by redefining <code>_suggestextractor(e::LeafEntry)</code>.</p></div></div><p>Please refer to the <a href="../../api/extractor/#JsonGrinder.suggestextractor"><code>suggestextractor</code></a> docs for all possible keyword arguments.</p><div class="admonition is-category-ukn"><header class="admonition-header">Inspect the result</header><div class="admonition-body"><p>It is <strong>recommended</strong> to check the proposed extractor manually, and modifying it if it makes sense.</p></div></div><h2 id="Stable-[Extractor](@ref)s"><a class="docs-heading-anchor" href="#Stable-[Extractor](@ref)s">Stable <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a>s</a><a id="Stable-[Extractor](@ref)s-1"></a><a class="docs-heading-anchor-permalink" href="#Stable-[Extractor](@ref)s" title="Permalink"></a></h2><p>Sometimes not all JSON documents in a dataset are complete. For example:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; jss = JSON.parse.([
           &quot;&quot;&quot; { &quot;a&quot; : 1, &quot;b&quot; : &quot;foo&quot; } &quot;&quot;&quot;,
           &quot;&quot;&quot; { &quot;b&quot; : &quot;bar&quot; } &quot;&quot;&quot;
       ]);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sch = schema(jss)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictEntry</span><span class="sgr90"><span class="sgr3"> 2x updated</span></span>
<span class="sgr34">  ├── a: </span>LeafEntry (1 unique `Real` values)<span class="sgr90"><span class="sgr3"> 1x updated</span></span>
<span class="sgr34">  ╰── b: </span>LeafEntry (2 unique `String` values)<span class="sgr90"><span class="sgr3"> 2x updated</span></span></code></pre><p>In such case, <a href="../../api/extractor/#JsonGrinder.suggestextractor"><code>suggestextractor</code></a> wraps the extractor corresponding to the key with missing data (<code>&quot;a&quot;</code>) into <a href="../../api/extractor/#JsonGrinder.StableExtractor"><code>StableExtractor</code></a>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e = suggestextractor(sch)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictExtractor</span>
<span class="sgr34">  ├── a: </span>StableExtractor(CategoricalExtractor(n=2))
<span class="sgr34">  ╰── b: </span>CategoricalExtractor(n=3)</code></pre><p>and the extraction works fine:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; extract(e, jss)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">ProductNode</span><span class="sgr90"><span class="sgr3">  2 obs</span></span>
<span class="sgr34">  ├── a: </span>ArrayNode(2×2 MaybeHotMatrix with Union{Missing, Bool} elements)<span class="sgr90"><span class="sgr3">  2 o </span>⋯</span>
<span class="sgr34">  ╰── b: </span>ArrayNode(3×2 OneHotArray with Bool elements)<span class="sgr90"><span class="sgr3">  2 obs</span></span></code></pre><p>If the dataset for schema inference is undersampled and the missing key doesn&#39;t show up, <a href="../../api/extractor/#JsonGrinder.suggestextractor"><code>suggestextractor</code></a> will infer unsuitable <a href="../../api/extractor/#JsonGrinder.Extractor"><code>Extractor</code></a>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; sch = schema(jss[1:1])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictEntry</span><span class="sgr90"><span class="sgr3"> 1x updated</span></span>
<span class="sgr34">  ├── a: </span>LeafEntry (1 unique `Real` values)<span class="sgr90"><span class="sgr3"> 1x updated</span></span>
<span class="sgr34">  ╰── b: </span>LeafEntry (1 unique `String` values)<span class="sgr90"><span class="sgr3"> 1x updated</span></span></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; e = suggestextractor(sch)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictExtractor</span>
<span class="sgr34">  ├── a: </span>CategoricalExtractor(n=2)
<span class="sgr34">  ╰── b: </span>CategoricalExtractor(n=2)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; e(jss[2])</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: IncompatibleExtractor at path [:a]: this path contains missing data not supported by this extractor! See the `Stable Extractors` section in the docs.</code></pre><p>There are multiple ways to deal with this problem:</p><ul><li>Manually wrap the problematic node (here with the help of  <a href="https://github.com/JuliaObjects/Accessors.jl"><code>Accessors.jl</code></a>):</li></ul><pre><code class="language-julia hljs">using Accessors</code></pre><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e_stable = @set e.children[:a] = StableExtractor(e[:a])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictExtractor</span>
<span class="sgr34">  ├── a: </span>StableExtractor(CategoricalExtractor(n=2))
<span class="sgr34">  ╰── b: </span>CategoricalExtractor(n=2)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; e_stable(jss[2])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">ProductNode</span><span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">  ├── a: </span>ArrayNode(2×1 MaybeHotMatrix with Union{Missing, Bool} elements)<span class="sgr90"><span class="sgr3">  1 o </span>⋯</span>
<span class="sgr34">  ╰── b: </span>ArrayNode(2×1 OneHotArray with Bool elements)<span class="sgr90"><span class="sgr3">  1 obs</span></span></code></pre><ul><li>Use <a href="../../api/extractor/#JsonGrinder.stabilizeextractor"><code>stabilizeextractor</code></a> on the whole tree (or a subtree):</li></ul><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e_stable = stabilizeextractor(e)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictExtractor</span>
<span class="sgr34">  ├── a: </span>StableExtractor(CategoricalExtractor(n=2))
<span class="sgr34">  ╰── b: </span>StableExtractor(CategoricalExtractor(n=2))</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; e_stable(jss[2])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">ProductNode</span><span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">  ├── a: </span>ArrayNode(2×1 MaybeHotMatrix with Union{Missing, Bool} elements)<span class="sgr90"><span class="sgr3">  1 o </span>⋯</span>
<span class="sgr34">  ╰── b: </span>ArrayNode(2×1 MaybeHotMatrix with Union{Missing, Bool} elements)<span class="sgr90"><span class="sgr3">  1 o </span>⋯</span></code></pre><ul><li>Call <a href="../../api/extractor/#JsonGrinder.suggestextractor"><code>suggestextractor</code></a> with <code>all_stable=true</code>. Now all document values are treated as possibly missing. Results of <code>stabilizeextractor(schema(...))</code> and <code>suggestextractor(...; all_stable=true)</code> are roughly equivalent:</li></ul><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; e_stable = suggestextractor(sch; all_stable=true)</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">DictExtractor</span>
<span class="sgr34">  ├── a: </span>StableExtractor(CategoricalExtractor(n=2))
<span class="sgr34">  ╰── b: </span>StableExtractor(CategoricalExtractor(n=2))</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; e_stable(jss[2])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr34">ProductNode</span><span class="sgr90"><span class="sgr3">  1 obs</span></span>
<span class="sgr34">  ├── a: </span>ArrayNode(2×1 MaybeHotMatrix with Union{Missing, Bool} elements)<span class="sgr90"><span class="sgr3">  1 o </span>⋯</span>
<span class="sgr34">  ╰── b: </span>ArrayNode(2×1 MaybeHotMatrix with Union{Missing, Bool} elements)<span class="sgr90"><span class="sgr3">  1 o </span>⋯</span></code></pre><ul><li>Preprocess the data (delete the problematic key from all documents or the schema, or make sure  that documents with the missing key are present in the data when calling <a href="../../api/schema/#JsonGrinder.schema"><code>schema</code></a>).</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../schema_inference/">« Schema inference</a><a class="docs-footer-nextpage" href="../../examples/mutagenesis/mutagenesis/">Mutagenesis »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Wednesday 11 December 2024 11:58">Wednesday 11 December 2024</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
